<!doctype html>
<html>
<head>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <title>üõè ‡§Æ‡•á‡§° ‡§∏‡§∞‡•ç‡§µ‡•á‡§Ç‡§ü ‡§ï‡•ã ‡§Æ‡§æ‡§≤‡§ø‡§ï ‡§®‡•á ‡§∞‡§Ç‡§°‡•Ä ‡§¨‡§®‡§æ‡§Ø‡§æ üí¶ | Clipfy Player</title>

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="üõè ‡§Æ‡•á‡§° ‡§∏‡§∞‡•ç‡§µ‡•á‡§Ç‡§ü ‡§ï‡•ã ‡§Æ‡§æ‡§≤‡§ø‡§ï ‡§®‡•á ‡§∞‡§Ç‡§°‡•Ä ‡§¨‡§®‡§æ‡§Ø‡§æ üí¶">
  <meta name="twitter:description" content="">
  <meta name="twitter:image" content="https://pub-a3ad4cec48664940879fc5dd37a07293.r2.dev/thumbs/5b8c93ea014042a1aa8e5cb35e670027.jpg">

  <meta property="og:image" content="https://pub-a3ad4cec48664940879fc5dd37a07293.r2.dev/thumbs/5b8c93ea014042a1aa8e5cb35e670027.jpg">
  <meta property="og:image:width" content="1280">
  <meta property="og:image:height" content="720">

  <meta name="twitter:player" content="https://clipfy.store/v/5b8c93ea014042a1aa8e5cb35e670027.html">
  <meta name="twitter:player:width" content="720">
  <meta name="twitter:player:height" content="405">
  <meta name="twitter:player:stream" content="https://pub-a3ad4cec48664940879fc5dd37a07293.r2.dev/videos/5b8c93ea014042a1aa8e5cb35e670027.mp4">
  <meta name="twitter:player:stream:content_type" content="video/mp4">

  <style>
    body{
      background:#0f141a;
      color:#fff;
      font-family:Arial, sans-serif;
      margin:0;
      padding:0;
      overflow-x:hidden;
    }

    .video-box{
      width:100%;
      height:40vh;
      position:fixed;
      top:0;
      left:0;
      background:#000;
      overflow:hidden;
      z-index:9999;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .video-box video{
      width:100%;
      height:100%;
      object-fit:contain;
    }

    .floating-ad-320x50{
      position:fixed;
      top:4px;
      left:50%;
      transform:translateX(-50%);
      z-index:10000;
      width:320px;
      max-width:95%;
      height:50px;
      pointer-events:auto;
    }

    .content-wrapper{
      padding-top:40vh;
      min-height:200vh;
    }

    .top-thin-ad{
      background:#1a2430;
      padding:6px 0;
      margin:0;
      text-align:center;
      border-bottom:1px solid #222;
    }
    .top-thin-ad-inner{
      width:728px;
      max-width:95%;
      height:90px;
      margin:0 auto;
    }

    .post{
      padding:10px 16px;
      display:flex;
      gap:10px;
      align-items:center;
      border-bottom:1px solid #222;
    }
    .dp{
      width:42px;
      height:42px;
      border-radius:50%;
      background:#555;
    }
    #creatorName{
      font-weight:600;
      font-size:15px;
    }
    #timeAgo{
      font-size:12px;
      color:#aaa;
      margin-top:2px;
    }

    .stats{
      display:flex;
      gap:14px;
      padding:8px 16px;
      border-bottom:1px solid #222;
      font-size:13px;
      align-items:center;
    }
    .stat-item{
      display:flex;
      align-items:center;
      gap:4px;
      color:#d0d0d0;
    }
    .stat-icon{
      width:14px;
      height:14px;
      stroke:#d0d0d0;
      fill:none;
    }
    .stats-right{
      margin-left:auto;
      cursor:pointer;
      font-size:13px;
    }

    .blog-content{
      padding:14px 16px;
      font-size:15px;
      line-height:1.5;
    }
    #mainTitle{
      margin:0 0 6px 0;
      font-size:18px;
      font-weight:600;
    }

    .suggestions-header{
      padding:10px 16px;
      font-size:16px;
      font-weight:700;
      border-top:1px solid #222;
    }
    .video-suggestions-list{
      background:transparent;
    }
    .suggestion-item{
      display:block;
      width:100%;
      padding:10px 16px 14px;
      cursor:pointer;
      border-bottom:1px solid #1a2430;
      transition:background .12s;
    }
    .suggestion-item:hover{
      background:#0b1216;
    }
    .suggestion-thumbnail{
      width:100%;
      aspect-ratio:16/9;
      background:#333;
      border-radius:6px;
      overflow:hidden;
      margin-bottom:8px;
    }
    .suggestion-thumbnail img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .suggestion-details{
      display:flex;
      flex-direction:column;
      justify-content:center;
    }
    .suggestion-title{
      font-weight:600;
      font-size:15px;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }
    .suggestion-creator{
      font-size:12px;
      color:#aaa;
      margin-top:3px;
    }

    .suggested-ad-slot{
      display:flex;
      justify-content:center;
      padding:12px 0;
      border-bottom:1px solid #222;
      background:transparent;
    }

    .footer-ad-320x50{
      position:fixed;
      bottom:0;
      left:0;
      width:100%;
      z-index:10001;
      background:#000;
      display:flex;
      justify-content:center;
      padding:4px 0;
    }
    .footer-ad-inner{
      width:320px;
      max-width:95%;
      height:50px;
    }

    .social-bar-wrap{
      position:fixed;
      bottom:60px;
      right:8px;
      z-index:10002;
    }

    .hidden{display:none!important;}
  </style>
</head>
<body>

  <div class="floating-ad-320x50" id="floatingAd320x50"></div>

  <div class="video-box">
    <video id="player" playsinline controls autoplay muted>
      <source src="https://pub-a3ad4cec48664940879fc5dd37a07293.r2.dev/videos/5b8c93ea014042a1aa8e5cb35e670027.mp4" type="video/mp4">
    </video>
  </div>

  <div class="content-wrapper">

    <div class="top-thin-ad">
      <div class="top-thin-ad-inner" id="topThinAdInner"></div>
    </div>

    <div class="post">
      <div class="dp" id="creatorDp"></div>
      <div>
        <div id="creatorName">Clipfy Videos</div>
        <div id="timeAgo">just now</div>
      </div>
    </div>

    <div class="stats">
      <div class="stat-item">
        <svg class="stat-icon" viewBox="0 0 24 24">
          <path d="M2 12s3.5-6 10-6 10 6 10 6-3.5 6-10 6-10-6-10-6z"/>
          <circle cx="12" cy="12" r="3"/>
        </svg>
        <span id="views">{{VIEWS}}</span>
      </div>

      <div class="stat-item">
        <svg class="stat-icon" viewBox="0 0 24 24">
          <path d="M12 21s-5-3.3-8-6.7C2 12.5 2 9.5 4 7.5 5.1 6.4 6.6 6 8 6c1.6 0 3.1.8 4 2 0.9-1.2 2.4-2 4-2 1.4 0 2.9.4 4 1.5 2 2 2 5 0 6.8C17 17.7 12 21 12 21z"/>
        </svg>
        <span id="likes">{{LIKES}}</span>
      </div>

      <div class="stats-right" id="shareBtn">Share</div>
    </div>

    <div class="blog-content">
      <h2 id="mainTitle">üõè ‡§Æ‡•á‡§° ‡§∏‡§∞‡•ç‡§µ‡•á‡§Ç‡§ü ‡§ï‡•ã ‡§Æ‡§æ‡§≤‡§ø‡§ï ‡§®‡•á ‡§∞‡§Ç‡§°‡•Ä ‡§¨‡§®‡§æ‡§Ø‡§æ üí¶</h2>
    </div>

    <div class="suggestions-header">More Viral Videos üî•</div>
    <div class="video-suggestions-list" id="videoSuggestionsList"></div>
  </div>

  <div class="footer-ad-320x50">
    <div class="footer-ad-inner" id="footerAdInner"></div>
  </div>

  <div class="social-bar-wrap" id="socialBarWrap"></div>

  <script>
    let VIDEOID = '5b8c93ea014042a1aa8e5cb35e670027';
    const APIBASE = '{{API_BASE}}';
    const ALLVIDEOS = [{"title": "\ud83d\udd1e Stepmom chudai 69 pose wild desi style \ud83c\udf46", "creator": "Content Creator", "video_url": "https://pub-a3ad4cec48664940879fc5dd37a07293.r2.dev/videos/1c22d287a2e743c38c633f1a38d9e504.mp4", "thumb_url": "https://pub-a3ad4cec48664940879fc5dd37a07293.r2.dev/thumbs/1c22d287a2e743c38c633f1a38d9e504.jpg", "video_id": "1c22d287a2e743c38c633f1a38d9e504", "time_ago": "just now", "description": "", "player_page_url": "https://clipfy.store/v/1c22d287a2e743c38c633f1a38d9e504.html", "player_page_safe_url": "https://clipfy.store/v/1c22d287a2e743c38c633f1a38d9e504_safe.html", "thumb_blur_url": "https://pub-a3ad4cec48664940879fc5dd37a07293.r2.dev/thumbs/1c22d287a2e743c38c633f1a38d9e504_blur.jpg"}, {"title": "\u26a0\ufe0f Stepbro stepsis anal mar diya hard \ud83c\udf46", "creator": "Content Creator", "video_url": "https://pub-a3ad4cec48664940879fc5dd37a07293.r2.dev/videos/b05b96f97a674037bacc2c228ec78a1f.mp4", "thumb_url": "https://pub-a3ad4cec48664940879fc5dd37a07293.r2.dev/thumbs/b05b96f97a674037bacc2c228ec78a1f.jpg", "video_id": "b05b96f97a674037bacc2c228ec78a1f", "time_ago": "just now", "description": "", "player_page_url": "https://clipfy.store/v/b05b96f97a674037bacc2c228ec78a1f.html", "player_page_safe_url": "https://clipfy.store/v/b05b96f97a674037bacc2c228ec78a1f_safe.html", "thumb_blur_url": "https://pub-a3ad4cec48664940879fc5dd37a07293.r2.dev/thumbs/b05b96f97a674037bacc2c228ec78a1f_blur.jpg"}];

    ALLVIDEOS.sort(() => Math.random() - 0.5);

    const INITIALDATA = {
      title: 'üõè ‡§Æ‡•á‡§° ‡§∏‡§∞‡•ç‡§µ‡•á‡§Ç‡§ü ‡§ï‡•ã ‡§Æ‡§æ‡§≤‡§ø‡§ï ‡§®‡•á ‡§∞‡§Ç‡§°‡•Ä ‡§¨‡§®‡§æ‡§Ø‡§æ üí¶',
      thumb: 'https://pub-a3ad4cec48664940879fc5dd37a07293.r2.dev/thumbs/5b8c93ea014042a1aa8e5cb35e670027.jpg',
      description: ''
    };

    const player = document.getElementById('player');
    const likesEl = document.getElementById('likes');
    const viewsEl = document.getElementById('views');
    const timeAgoEl = document.getElementById('timeAgo');
    const mainTitleEl = document.getElementById('mainTitle');
    const creatorNameEl = document.getElementById('creatorName');
    const videoSuggestionsList = document.getElementById('videoSuggestionsList');
    const shareBtn = document.getElementById('shareBtn');
    const topThinAdInner = document.getElementById('topThinAdInner');
    const footerAdInner = document.getElementById('footerAdInner');
    const floatingAd320 = document.getElementById('floatingAd320x50');
    const socialBarWrap = document.getElementById('socialBarWrap');

    let viewCounted = false;
    player.addEventListener('play', () => {
      if(viewCounted) return;
      viewCounted = true;
      fetch(APIBASE + 'hit', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({videoid:VIDEOID,type:'view'})
      }).catch(()=>{});
    });

    shareBtn.onclick = () => {
      const mt = document.querySelector('meta[name="twitter:title"]');
      const shareTitle = (mt && mt.getAttribute('content')) || document.title;
      if(navigator.share){
        navigator.share({title:shareTitle,url:location.href}).catch(()=>{});
      }else{
        navigator.clipboard?.writeText(location.href)
          .then(()=>alert('Link Copied!'))
          .catch(()=>alert(location.href));
      }
    };

    /* --------------------------------------------------
       FINAL FIXED CSP-SAFE AD LOADER
    -------------------------------------------------- */
    function injectBannerAd({key, width, height, container}) {
      if (!container) return;

      const marker = 'data-at-key-' + key + '-' + width + 'x' + height;
      if (container.getAttribute(marker)) return;
      container.setAttribute(marker, '1');

      window.atOptions = {
        'key': key,
        'format': 'iframe',
        'height': height,
        'width': width,
        'params': {}
      };

      const s = document.createElement('script');
      s.src = `https://www.highperformanceformat.com/${key}/invoke.js`;
      s.async = true;

      container.innerHTML = "";
      container.appendChild(s);
    }

    function injectSocialBar(container){
      if(!container) return;
      const marker = 'data-social-bar';
      if(container.getAttribute(marker)) return;
      container.setAttribute(marker,'1');

      const s = document.createElement('script');
      s.src = '//pl28118636.effectivegatecpm.com/15/a6/05/15a60534651f783c4ee900a1a7101385.js';
      s.async = true;
      container.appendChild(s);
    }

    function renderVideoSuggestions(videos){
      videoSuggestionsList.innerHTML = '';
      let shown = 0;

      for(const v of videos){
        if(!v || v.videoid === VIDEOID) continue;

        if(shown > 0 && shown % 2 === 0){
          const adSlot = document.createElement('div');
          adSlot.className = 'suggested-ad-slot';
          const inner = document.createElement('div');
          inner.style.width = '300px';
          inner.style.height = '250px';
          inner.style.maxWidth = '95%';
          adSlot.appendChild(inner);
          videoSuggestionsList.appendChild(adSlot);
          injectBannerAd({
            key:'e8550078b37b6bf29c9b54eed61806f7',
            width:300,
            height:250,
            container:inner
          });
        }

        const item = document.createElement('div');
        item.className = 'suggestion-item';
        item.dataset.videoId = v.videoid;
        item.innerHTML = `
          <div class="suggestion-thumbnail">
            <img src="${escapeHtml(v.thumburl)}" alt="${escapeHtml(v.title)}" loading="lazy">
          </div>
          <div class="suggestion-details">
            <div class="suggestion-title">${escapeHtml(v.title)}</div>
            <div class="suggestion-creator">${escapeHtml(v.creator)}</div>
          </div>
        `;
        item.onclick = e => {
          e.preventDefault();
          playSuggestedVideo(v);
        };

        videoSuggestionsList.appendChild(item);
        shown++;
      }
    }

    function playSuggestedVideo(v){
      if(!v || !v.videourl) return;

      const src = player.querySelector('source');
      src.src = v.videourl;
      player.load();
      player.play().catch(()=>{});
      viewCounted = false;

      VIDEOID = v.videoid;
      mainTitleEl.innerText = v.title || '';
      timeAgoEl.innerText = v.timeago || '';
      creatorNameEl.innerText = v.creator || 'Clipfy Videos';
      likesEl.innerText = v.likes ?? 0;
      viewsEl.innerText = v.views ?? 0;

      safeUpdateMetaTags({
        title: v.title,
        document_title: v.title ? (v.title + ' | Clipfy Player') : 'Clipfy Player',
        description: v.description,
        image: v.thumburl || v.thumb || INITIALDATA.thumb,
        playerpage: 'v/' + v.videoid + '.html',
        stream: v.videourl
      });

      const newPath = 'v/' + v.videoid + '.html';
      try{
        history.pushState({...v}, v.title, newPath);
      }catch(e){}

      renderVideoSuggestions(ALLVIDEOS);
      window.scrollTo({top:0,behavior:'smooth'});
    }

    window.onpopstate = ev => {
      if(!ev.state || !ev.state.videoid) return;
      const v = ev.state;
      const src = player.querySelector('source');

      src.src = v.videourl;
      player.load();
      player.play().catch(()=>{});

      VIDEOID = v.videoid;
      mainTitleEl.innerText = v.title || '';
      timeAgoEl.innerText = v.timeago || '';
      creatorNameEl.innerText = v.creator || 'Clipfy Videos';
      likesEl.innerText = v.likes ?? 0;
      viewsEl.innerText = v.views ?? 0;

      safeUpdateMetaTags({
        title: v.title,
        document_title: v.title ? (v.title + ' | Clipfy Player') : 'Clipfy Player',
        description: v.description,
        image: v.thumburl || v.thumb,
        playerpage: 'v/' + v.videoid + '.html',
        stream: v.videourl
      });

      renderVideoSuggestions(ALLVIDEOS);
      window.scrollTo({top:0,behavior:'smooth'});
    };

    function safeUpdateMetaTags(o){
      try{
        setOrCreateMeta('twitter:title', o.title);
        setOrCreateMeta('twitter:description', o.description);
        setOrCreateMeta('twitter:image', o.image);
        setOrCreateMeta('og:image', o.image);
        setOrCreateMeta('twitter:player', o.playerpage);
        setOrCreateMeta('twitter:player:stream', o.stream);
        document.title = o.document_title;
      }catch(e){}
    }

    function setOrCreateMeta(nameOrProp, value){
      if(!value) return;
      const isOg = nameOrProp.startsWith('og');
      const sel = isOg ? `meta[property="${nameOrProp}"]` : `meta[name="${nameOrProp}"]`;
      let el = document.querySelector(sel);
      if(!el){
        el = document.createElement('meta');
        if(isOg) el.setAttribute('property', nameOrProp);
        else el.setAttribute('name', nameOrProp);
        document.head.appendChild(el);
      }
      el.setAttribute('content', value);
    }

    function escapeHtml(str){
      return (str || "")
        .replace(/&/g,'&amp;')
        .replace(/</g,'&lt;')
        .replace(/>/g,'&gt;')
        .replace(/"/g,'&quot;')
        .replace(/'/g,'&#39;');
    }

    document.addEventListener('DOMContentLoaded', () => {
      creatorNameEl.innerText = 'Clipfy Videos';
      renderVideoSuggestions(ALLVIDEOS);

      injectBannerAd({
        key:'b40d9ebf8b9bb68f80451819ab41596e',
        width:728,
        height:90,
        container:topThinAdInner
      });

      injectBannerAd({
        key:'b43458b980a14fc9fc68555f58ae039f',
        width:320,
        height:50,
        container:footerAdInner
      });

      injectBannerAd({
        key:'b43458b980a14fc9fc68555f58ae039f',
        width:320,
        height:50,
        container:floatingAd320
      });

      injectSocialBar(socialBarWrap);

      try{
        history.replaceState({
          videoid: VIDEOID,
          title: INITIALDATA.title,
          videourl: player.querySelector('source').src,
          timeago: 'just now',
          likes: likesEl.innerText,
          views: viewsEl.innerText,
          thumb: INITIALDATA.thumb
        }, INITIALDATA.title, location.pathname);
      }catch(e){}
    });
  </script>
</body>
</html>
