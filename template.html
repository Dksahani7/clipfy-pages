<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Clipfy Player</title>

<meta name="twitter:card" content="player" /> 
<meta name="twitter:title" content="{{TITLE}}" />
<meta name="twitter:description" content="{{DESCRIPTION}}" />
<meta name="twitter:image" content="{{THUMB_URL}}" />
<meta property="og:image" content="{{THUMB_URL}}" />
<meta property="og:image:width" content="1280" />
<meta property="og:image:height" content="720" />
<meta name="twitter:player" content="{{PLAYER_PAGE_URL}}" />
<meta name="twitter:player:width" content="720" />
<meta name="twitter:player:height" content="405" />
<meta name="twitter:player:stream" content="{{VIDEO_URL}}" />
<meta name="twitter:player:stream:content_type" content="video/mp4" />

<style>
/* CSS Failsafe: Ensures stable layout and prevents ad interference */
body {
  background:#0f141a;
  color:white;
  font-family:Arial, sans-serif;
  margin:0;
  padding:0;
  overflow-x:hidden;
  min-width: 100vw;
}

/* 1. FIXED VIDEO BOX (40% HEIGHT) */
.video-box {
  width:100%;
  height:40vh;
  position:fixed;
  top:0;
  left:0;
  background:#000; 
  overflow:hidden;
  z-index:99999; /* Ads ‡§ï‡•ã ‡§®‡•Ä‡§ö‡•á ‡§∞‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§∞‡•ç‡§µ‡•ã‡§ö‡•ç‡§ö z-index */
  min-width: 100%; /* Scaling ‡§ï‡•ã ‡§∞‡•ã‡§ï‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è */
}

video {
  width:100%;
  height:100%;
  /* ‚ú® REVERTED FIX: 'cover' ‡§µ‡§æ‡§™‡§∏ ‡§Ü ‡§ó‡§Ø‡§æ! ‡§Ø‡§π 40vh ‡§è‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•ã ‡§™‡•Ç‡§∞‡•Ä ‡§§‡§∞‡§π ‡§≠‡§∞‡•á‡§ó‡§æ (Reels Crop ‡§π‡•ã ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à) */
  object-fit:cover !important; 
  display:block;
}

/* 2. SCROLLABLE CONTENT WRAPPER */
.content-wrapper {
  padding-top:40vh; 
  min-height:100vh;
  position:relative;
  z-index:1;
  min-width: 100%; 
}

.header {
  display:flex;
  justify-content:space-between;
  padding:12px;
  border-bottom:1px solid #222;
  font-size:20px;
}

/* ... (‡§¨‡§æ‡§ï‡•Ä ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤‡§ø‡§Ç‡§ó) ... */

.blog-content {
  padding:12px;
  line-height:1.6;
  font-size:16px;
  position:relative;
  z-index:2; 
}

/* 3. AD SLOTS (Ensures ads stay in flow) */
.ad-slot {
  text-align:center;
  background:#1a2430;
  padding:20px;
  margin:20px 12px;
  border-radius:8px;
  font-size:14px;
  color:#888;
  
  /* FIX: Ads ‡§ï‡•ã ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü ‡§´‡•ç‡§≤‡•ã ‡§Æ‡•á‡§Ç ‡§Æ‡§ú‡§¨‡•Ç‡§∞ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è */
  position: relative !important; 
  z-index: 1 !important; 
}
</style>
</head>

<body>

<div class="video-box"> 
  <div style="position:absolute; z-index:10; margin:10px; background:rgba(0,0,0,0.55); padding:6px 10px; border-radius:6px; font-size:13px;">
    ‚ñ∂ X Video
  </div>

  <video id="player" playsinline controls autoplay muted>
    <source src="{{VIDEO_URL}}" type="video/mp4">
  </video>
</div>

<div class="content-wrapper">

  <div class="header">
    <div>X</div>
    <div>‚ãØ</div>
  </div>
  <div class="post">
    <div class="dp"></div>
    <div>
      <div style="font-weight:700;">Content Creator Name</div>
      <div class="title" id="timeAgo">Loading...</div>
    </div>
  </div>

  <div class="stats">
    <div id="likeBtn" class="stat-btn">‚ù§Ô∏è <span id="likes">0</span></div>
    <div>üëÅÔ∏è <span id="views">0</span></div>
    <div style="margin-left:auto;" id="shareBtn">üîó Share</div>
  </div>

  <div class="blog-content">

    <h2 style="font-size:20px; font-weight:800; margin-bottom:10px; color:#fff;">
        Sex Education: ‡§∏‡§Æ‡§ù, ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§î‡§∞ ‡§ú‡§º‡§ø‡§Æ‡•ç‡§Æ‡•á‡§¶‡§æ‡§∞‡•Ä
    </h2>

    <p style="color:#bdbdbd;">Sex education ‡§∏‡§ø‡§∞‡•ç‡§´ sex ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§§‡§æ ‚Äî ‡§Ø‡§π ‡§∂‡§∞‡•Ä‡§∞, ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø, consent, respect ‡§î‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡§ø‡§∂‡•ç‡§§‡•á ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•Ä ‡§∏‡§Æ‡§ù ‡§¶‡•á‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§...</p>

    <div class="ad-slot">
      <script type="text/javascript">
      atOptions = { 'key' : 'e8550078b37b6bf29c9b54eed61806f7', 'format' : 'iframe', 'height' : 250, 'width' : 300, 'params' : {} };
      </script>
      <script type="text/javascript" src="//www.highperformanceformat.com/e8550078b37b6bf29c9b54eed61806f7/invoke.js"></script>
    </div>

    <h3 style="color:#fff;">1. ‡§∂‡§∞‡•Ä‡§∞ ‡§î‡§∞ ‡§¨‡§¶‡§≤‡§æ‡§µ</h3>
    <p style="color:#c9c9c9;">Puberty ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡§æ‡§µ normal ‡§π‡•à‡§Ç‡•§ ‡§Ö‡§™‡§®‡•á ‡§∂‡§∞‡•Ä‡§∞ ‡§ï‡•ã ‡§∏‡§Æ‡§ù‡§®‡§æ ‡§î‡§∞ ‡§â‡§∏‡§ï‡•Ä respect ‡§ï‡§∞‡§®‡§æ sex education ‡§ï‡§æ ‡§™‡§π‡§≤‡§æ ‡§ï‡§¶‡§Æ ‡§π‡•à‡•§</p>

    <div class="ad-slot">
      <script type="text/javascript">
      atOptions = { 'key' : 'b40d9ebf8b9bb68f80451819ab41596e', 'format' : 'iframe', 'height' : 90, 'width' : 728, 'params' : {} };
      </script>
      <script type="text/javascript" src="//www.highperformanceformat.com/b40d9ebf8b9bb68f80451819ab41596e/invoke.js"></script>
    </div>

    <h3 style="color:#fff;">2. Consent</h3>
    <p style="color:#c9c9c9;">Consent ‡§Æ‡§§‡§≤‡§¨ ‚Äî ‡§¨‡§ø‡§®‡§æ ‡§¶‡§¨‡§æ‡§µ, ‡§ß‡§Æ‡§ï‡•Ä, ‡§Æ‡§ú‡§¨‡•Ç‡§∞‡•Ä ‡§Ø‡§æ ‡§ù‡•Ç‡§† ‡§ï‡•á, ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§≤‡•ã‡§ó‡•ã‡§Ç ‡§ï‡•Ä ‡§Æ‡§∞‡•ç‡§ú‡•Ä ‡§∏‡•á ‡§≤‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§´‡•à‡§∏‡§≤‡§æ‡•§ Healthy relationship ‡§µ‡§π‡•Ä ‡§π‡•à ‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§≤‡•ã‡§ó comfortable ‡§π‡•ã‡§Ç‡•§</p>

    <div class="ad-slot">
        <strong>Ad Slot 3</strong> ‚Äî (‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡§æ ‡§ï‡•ã‡§° ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç)
    </div>

  </div>
</div>

<script>
const VIDEO_ID = '{{VIDEO_ID}}';
const API_BASE = '{{API_BASE}}';
const likesEl = document.getElementById('likes');
const viewsEl = document.getElementById('views');
const likeBtn = document.getElementById('likeBtn');
const shareBtn = document.getElementById('shareBtn');
const player = document.getElementById('player');
let liked = false;

async function fetchStats(){
  try{
    const res = await fetch(`${API_BASE}/stats?video_id=${encodeURIComponent(VIDEO_ID)}`);
    if(!res.ok) return;
    const j = await res.json();
    likesEl.textContent = j.likes || 0;
    viewsEl.textContent = j.views || 0;
  }catch(e){}
}

let viewCounted = false;
function countViewOnce(){
  if(viewCounted) return;
  viewCounted = true;
  fetch(`${API_BASE}/hit`, { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({video_id:VIDEO_ID, type:'view'}) });
}

player.addEventListener('play', ()=>countViewOnce());
setTimeout(()=>{ if(!viewCounted) countViewOnce(); }, 3500);

likeBtn.addEventListener('click', async ()=>{
  liked = !liked;
  likeBtn.style.opacity = liked ? '0.7' : '1';
  try{
    const res = await fetch(`${API_BASE}/like`, { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({video_id:VIDEO_ID, like: liked}) });
    if(res.ok){ const j = await res.json(); likesEl.textContent = j.likes; }
  }catch(e){}
});

shareBtn.addEventListener('click', ()=>{
  if(navigator.share){ navigator.share({title:'Clipfy', url:location.href}); } 
  else { navigator.clipboard.writeText(location.href).then(()=>alert('Link copied')); }
});

fetchStats();
setInterval(fetchStats,15000);
</script>

<script type='text/javascript' src='//pl28118636.effectivegatecpm.com/15/a6/05/15a60534651f783c4ee900a1a7101385.js'></script>

</body>
</html>
